<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>画像アップロード</title>
</head>
<body>
    <h1>証明写真アップロード</h1>
    <form action="/upload" method="post" enctype="multipart/form-data">
        <label>画像を選択：</label>
        <input type="file" name="image" required><br><br>

        <label>背景色を選択（RGB形式）:</label>
        <input type="text" name="bgcolor" value="255,255,255"><br><br>

        <label>アスペクト比選択:</label>
        <select name="aspect_ratio">
            <option value="3:4" selected>3:4（就活）</option>
            <option value="2:3">2:3（パスポート）</option>
            <option value="1:1">1:1（マイナンバー）</option>
            <option value="custom">カスタム</option>
        </select><br><br>

        <div id="custom_ratio" style="display:none;">
            <label>カスタム横幅比:</label>
            <input type="number" name="custom_rw_hidden" value="3" step="0.1"><br>
            <label>カスタム高さ比:</label>
            <input type="number" name="custom_rh_hidden" value="4" step="0.1"><br><br>
        </div>

        <label>用途（補助線表示用）:</label>
        <select name="purpose">
            <option value="job" selected>就活</option>
            <option value="passport">パスポート</option>
            <option value="mynumber">マイナンバー</option>
        </select><br><br>

        <label>出力画像幅（px）:</label>
        <input type="number" name="width" value="600" required><br><br>

        <label>出力画像高さ（px）:</label>
        <input type="number" name="height" value="800" required><br><br>

        <label>出力形式:</label>
        <select name="format">
            <option value="jpeg" selected>JPEG</option>
            <option value="png">PNG</option>
        </select><br><br>

        <label>拡大縮小（倍率）:</label>
        <input type="number" step="0.01" name="scale_factor" value="1.0"><br><br>

        <label>顔の縦位置調整（px）:</label>
        <input type="number" name="y_offset" value="0"><br><br>

        <input type="submit" value="プレビュー作成">
    </form>

    <script>
        // アスペクト比選択でカスタムを選んだときだけ入力欄を出す
        document.querySelector('select[name="aspect_ratio"]').addEventListener('change', function() {
            if (this.value === "custom") {
                document.getElementById("custom_ratio").style.display = "block";
            } else {
                document.getElementById("custom_ratio").style.display = "none";
            }
        });
    </script>
</body>
</html>
